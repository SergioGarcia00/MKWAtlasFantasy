{
  "entities": {
    "Player": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Player",
      "type": "object",
      "description": "Represents a Mario Kart player with their statistics and cost.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the Player entity." },
        "name": { "type": "string", "description": "The name of the Mario Kart player." },
        "icon": { "type": "string", "description": "The name of the icon for the player." },
        "cost": { "type": "number", "description": "The cost of the player in in-app currency." },
        "stats": {
          "type": "object",
          "properties": {
            "speed": { "type": "number" },
            "acceleration": { "type": "number" },
            "weight": { "type": "number" },
            "handling": { "type": "number" },
            "traction": { "type": "number" }
          },
          "required": ["speed", "acceleration", "weight", "handling", "traction"]
        },
        "mmr": { "type": "number", "description": "Player's current matchmaking rating." },
        "peak_mmr": { "type": "number", "description": "Player's peak matchmaking rating." },
        "rank": { "type": "number" },
        "events_played": { "type": "number" },
        "country": { "type": "string" },
        "game_stats": {
          "type": "object",
          "properties": {
            "1v1": { "$ref": "#/entities/GameStats" },
            "2v2": { "$ref": "#/entities/GameStats" }
          }
        }
      },
      "required": ["id", "name", "icon", "cost", "stats"]
    },
    "GameStats": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "GameStats",
      "type": "object",
      "description": "Statistics for a player in a specific game mode.",
      "properties": {
        "events_played": { "type": "number" },
        "win_rate": { "type": "string" },
        "win_loss_last_10": { "type": "string" },
        "gainloss_last_10": { "type": "number" },
        "largest_gain": { "type": "number" },
        "average_score": { "type": "number" },
        "average_score_no_sq": { "type": "number" },
        "average_score_last_10": { "type": "number" },
        "partner_average_score": { "type": "number" },
        "partner_average_score_no_sq": { "type": "number" }
      }
    },
    "UserProfile": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserProfile",
      "type": "object",
      "description": "Represents a user of the Kart Fantasy League.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the User entity." },
        "name": { "type": "string", "description": "The name of the user." },
        "currency": { "type": "number", "description": "The amount of in-app currency the user has." },
        "players": {
          "type": "array",
          "items": { "$ref": "#/entities/UserPlayer" }
        },
        "roster": {
          "type": "object",
          "properties": {
            "lineup": { "type": "array", "items": { "type": "string" } },
            "bench": { "type": "array", "items": { "type": "string" } }
          },
          "required": ["lineup", "bench"]
        },
        "weeklyScores": {
          "type": "object",
          "additionalProperties": {
            "type": "object",
            "additionalProperties": { "$ref": "#/entities/WeeklyScore" }
          }
        },
        "bids": {
          "type": "object",
          "additionalProperties": { "type": "number" }
        }
      },
      "required": ["id", "name", "currency", "players", "roster", "weeklyScores", "bids"]
    },
    "UserPlayer": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "UserPlayer",
      "type": "object",
      "description": "Represents a player owned by a user, including purchase date.",
      "properties": {
        "id": { "type": "string" },
        "purchasedAt": { "type": "number", "description": "Timestamp of the purchase." }
      },
      "required": ["id", "purchasedAt"]
    },
    "WeeklyScore": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "WeeklyScore",
      "type": "object",
      "properties": {
        "race1": { "type": "number" },
        "race2": { "type": "number" }
      },
      "required": ["race1", "race2"]
    },
    "MarketPlayer": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "MarketPlayer",
        "description": "A player available in the daily market.",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "name": { "type": "string" },
            "icon": { "type": "string" },
            "cost": { "type": "number" }
        },
        "required": ["id", "name", "icon", "cost"]
    },
    "Week": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Week",
        "description": "Represents a week in the league.",
        "type": "object",
        "properties": {
            "id": { "type": "string" },
            "name": { "type": "string" }
        },
        "required": ["id", "name"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/UserProfile" },
      "description": "Stores all data for a single user, including their profile, currency, owned players, roster, and bids."
    },
    "/market": {
        "schema": { "$ref": "#/entities/MarketPlayer" },
        "description": "A collection where each document is a player currently available for auction in the daily market."
    },
    "/weeks": {
        "schema": { "$ref": "#/entities/Week" },
        "description": "A collection where each document represents a week of the league."
    }
  }
}